!function(t,n,a){"use strict";var i={},e=".sortable-button",s=n(".scriptless-sortable-buttons"),r=(s.find('input[type="number"]'),!1);function o(){if(!r){var t=n(e).find("input"),a=1;n.each(t,function(){var t=n(this).val();n(this).attr("data-initial-value",t),n(this).attr("value",a),a++})}}i.init=function(){s.length&&(o(),n('label[for^="scriptlesssocialsharing[buttons]"] input').on("change.scriptless-buttons",i.manageButtons),s.find('input[type="number"]').on("change",function(){!function(t){var a=s.find('input[type="number"]'),i=t.val()-t.attr("data-initial-value"),e=parseInt(t.val(),10),o=parseInt(t.attr("data-initial-value"),10),u=n(a).length;e>u?t.val(u):e<1&&t.val(1);if(n(a).not(n(t)).each(function(){var t=parseInt(n(this).val(),10);t>=e&&t<o&&i<0?n(this).val(t+1):t<=e&&t>o&&i>0&&n(this).val(t-1)}).promise().done(function(){n(a).each(function(){""!==n(this).val()&&n(this).attr("data-initial-value",n(this).val())})}),r)return;n(".change-warning").show(),s.sortable("disable"),r=!0}(n(this))}),i.sort())},i.manageButtons=function(){var t=n(this).attr("data-attr"),a=n(this).parent().text(),i=s.find('input[type="number"]'),r=i.length+1;if(n(this).prop("checked")){var u=n("<div />",{class:"button sortable-button",style:"margin-right:4px;"}).append(n("<input>",{type:"number",name:"scriptlesssocialsharing[order]["+t+"]",value:r,"data-initial-value":r,min:1,max:r})).append(a);s.append(u)}else n(e+":contains("+a+")").remove(),r-=2;n.each(i,function(){n(this).attr("max",r)}),o()},i.sort=function(){s.sortable({containment:"parent",cursor:"move",items:e,tolerance:"pointer",stop:function(t,n){o()}})},i.init()}(document,jQuery);